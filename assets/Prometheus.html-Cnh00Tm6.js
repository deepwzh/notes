import{_ as s,c as a,a as p,o as t}from"./app-BNx8wf2R.js";const e={};function o(l,n){return t(),a("div",null,n[0]||(n[0]=[p(`<h1 id="prometheus" tabindex="-1"><a class="header-anchor" href="#prometheus"><span>Prometheus</span></a></h1><p>监控 proms</p><p>Golang fiber 集成 proms</p><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go"><pre><code><span class="line">app <span class="token operator">:=</span> fiber<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span>fiber<span class="token punctuation">.</span>Config<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">  </span>
<span class="line">prometheusHandler <span class="token operator">:=</span> fasthttpadaptor<span class="token punctuation">.</span><span class="token function">NewFastHTTPHandler</span><span class="token punctuation">(</span></span>
<span class="line">    promhttp<span class="token punctuation">.</span><span class="token function">HandlerFor</span><span class="token punctuation">(</span></span>
<span class="line">        prometheus<span class="token punctuation">.</span>DefaultGatherer<span class="token punctuation">,</span></span>
<span class="line">        promhttp<span class="token punctuation">.</span>HandlerOpts<span class="token punctuation">{</span></span>
<span class="line">            <span class="token boolean">_</span><span class="token comment">// Opt into OpenMetrics to support exemplars.</span></span>
<span class="line"><span class="token boolean">_</span>            EnableOpenMetrics<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">app<span class="token punctuation">.</span><span class="token function">Get</span><span class="token punctuation">(</span><span class="token string">&quot;/metrics&quot;</span><span class="token punctuation">,</span> <span class="token keyword">func</span><span class="token punctuation">(</span>c <span class="token operator">*</span>fiber<span class="token punctuation">.</span>Ctx<span class="token punctuation">)</span> <span class="token builtin">error</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token boolean">_</span><span class="token comment">// recordMetrics()</span></span>
<span class="line"><span class="token boolean">_</span>    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Hello World&quot;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token function">prometheusHandler</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token function">Context</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token boolean">nil</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,4)]))}const i=s(e,[["render",o]]),u=JSON.parse('{"path":"/Devops/Prometheus.html","title":"Prometheus","lang":"zh-CN","frontmatter":{},"headers":[],"git":{},"filePathRelative":"Devops/Prometheus.md"}');export{i as comp,u as data};
