(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{344:function(a,s,t){"use strict";t.r(s);var e=t(4),n=Object(e.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"包管理-ubuntu-debian"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#包管理-ubuntu-debian"}},[a._v("#")]),a._v(" 包管理-Ubuntu/Debian")]),a._v(" "),s("h2",{attrs:{id:"概述"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#概述"}},[a._v("#")]),a._v(" 概述")]),a._v(" "),s("p",[a._v("在 Debian 系 Linux 发行版（如 Ubuntu），"),s("code",[a._v("APT")]),a._v(" (Advanced Package Tool) 最常用的高级包管理工具(Ubuntu、Debian 系发行版），他使用 DEB 作为软件包格式。")]),a._v(" "),s("p",[s("code",[a._v("DEB")]),a._v("（Debian Package）是 Debian 系 Linux 发行版（如 Ubuntu）中软件包管理的核心组件。Deb 包通过 Dpkg 工具进行安装。")]),a._v(" "),s("p",[a._v("它们的关系如下：")]),a._v(" "),s("ul",[s("li",[s("code",[a._v("Deb")]),a._v(" 是包格式")]),a._v(" "),s("li",[s("code",[a._v("Dpkg")]),a._v(" 用于包的操作安装")]),a._v(" "),s("li",[s("code",[a._v("Apt")]),a._v(" 会调用 "),s("code",[a._v("Dpkg")]),a._v(" 进行包的安装，并解决依赖问题")])]),a._v(" "),s("h2",{attrs:{id:"配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置"}},[a._v("#")]),a._v(" 配置")]),a._v(" "),s("p",[a._v("镜像源配置地址：/etc/apt/source.list")]),a._v(" "),s("p",[a._v("在 Ubuntu24.04，配置格式做了一次升级")]),a._v(" "),s("h3",{attrs:{id:"镜像源替换"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#镜像源替换"}},[a._v("#")]),a._v(" 镜像源替换")]),a._v(" "),s("p",[a._v("Ubuntu24.04-")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sed")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-i")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'s/archive.ubuntu.com/mirrors.aliyun.com/g'")]),a._v(" /etc/apt/sources.list\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 或者")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sed")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-i")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'s|http://deb.debian.org/debian|https://mirrors.tuna.tsinghua.edu.cn/debian|g'")]),a._v(" /etc/apt/sources.list\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br")])]),s("p",[a._v("Ubuntu24.04+")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v('sed -i "s@http://.*archive.ubuntu.com@https://mirrors.aliyun.com@g; s@http://.*security.ubuntu.com@https://mirrors.aliyun.com@g" /etc/apt/sources.list.d/ubuntu.sources\n')])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h2",{attrs:{id:"dpkg-相关命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#dpkg-相关命令"}},[a._v("#")]),a._v(" dpkg 相关命令")]),a._v(" "),s("h3",{attrs:{id:"安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[a._v("#")]),a._v(" 安装")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 安装")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" dpkg "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-i")]),a._v(" package.deb\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("h3",{attrs:{id:"卸载"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#卸载"}},[a._v("#")]),a._v(" 卸载")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 卸载")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" dpkg "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-r")]),a._v(" package_name\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 完全卸载")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" dpkg "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-P")]),a._v(" package_name\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br")])]),s("h3",{attrs:{id:"查询信息"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#查询信息"}},[a._v("#")]),a._v(" "),s("strong",[a._v("查询信息")])]),a._v(" "),s("ul",[s("li",[s("strong",[a._v("列出已安装的包")]),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code")]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"})])])]),a._v(" "),s("p",[a._v("dpkg -l")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("\n- **查看包状态（如版本、依赖）**  \n\t```bash\ndpkg -s package_name\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br")])]),s("ul",[s("li",[s("strong",[a._v("列出包安装的文件")]),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code")]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"})])])]),a._v(" "),s("p",[a._v("dpkg -L package_name")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("\n- **搜索文件所属的包**  \n\t```bash\ndpkg -S /path/to/file\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br")])]),s("h3",{attrs:{id:"包内容检查"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#包内容检查"}},[a._v("#")]),a._v(" "),s("strong",[a._v("包内容检查")])]),a._v(" "),s("ul",[s("li",[a._v("**查看 "),s("strong",[s("strong",[a._v(".deb")])]),a._v(" **文件内容"),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code")]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"})])])]),a._v(" "),s("p",[a._v("dpkg -c package.deb")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("\n- **提取包元信息**  \n\t```bash\ndpkg -I package.deb\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br")])]),s("h3",{attrs:{id:"注意事项"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#注意事项"}},[a._v("#")]),a._v(" 注意事项")]),a._v(" "),s("ul",[s("li",[s("code",[a._v("dpkg")]),a._v(" 不自动解决依赖，若安装失败可运行 "),s("code",[a._v("sudo apt-get -f install")]),a._v(" 修复。")]),a._v(" "),s("li",[a._v("日常推荐优先使用 "),s("code",[a._v("apt")]),a._v("/"),s("code",[a._v("apt-get")]),a._v("，"),s("code",[a._v("dpkg")]),a._v(" 更适合手动管理本地包。")])]),a._v(" "),s("h2",{attrs:{id:"apt-相关命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#apt-相关命令"}},[a._v("#")]),a._v(" apt 相关命令")]),a._v(" "),s("h3",{attrs:{id:"包查询与搜索"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#包查询与搜索"}},[a._v("#")]),a._v(" 包查询与搜索")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 搜索包名称")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("apt")]),a._v(" search package_name\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 查看可以升级的包")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("apt")]),a._v(" list "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--upgradeable")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br")])]),s("h3",{attrs:{id:"更新镜像源"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#更新镜像源"}},[a._v("#")]),a._v(" 更新镜像源")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("apt")]),a._v(" update\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h3",{attrs:{id:"升级已经安装的包"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#升级已经安装的包"}},[a._v("#")]),a._v(" 升级已经安装的包")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("apt")]),a._v(" upgrade\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h3",{attrs:{id:"查看包信息"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#查看包信息"}},[a._v("#")]),a._v(" 查看包信息")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 查看包内容")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("apt")]),a._v(" show package_name\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("h3",{attrs:{id:"保持包-禁止其版本更新"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#保持包-禁止其版本更新"}},[a._v("#")]),a._v(" 保持包（禁止其版本更新）")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" apt-mark hold package_name\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h3",{attrs:{id:"下载源码包"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#下载源码包"}},[a._v("#")]),a._v(" 下载源码包")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("apt")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("source")]),a._v(" package_name\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h3",{attrs:{id:"清理维护"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#清理维护"}},[a._v("#")]),a._v(" 清理维护")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 清理缓存包")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("apt")]),a._v(" clean\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 只清理旧版本的缓存包")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("apt")]),a._v(" autoclean\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br")])]),s("p",[a._v("例如命令用于在基于 Debian 的 Linux 发行版（如 Ubuntu）上将 kubelet、kubeadm 和 kubectl 这三个 Kubernetes 组件的包标记为“保持”状态。这样做的目的是防止这些包在系统更新时被自动升级。")]),a._v(" "),s("p",[a._v("/")])])}),[],!1,null,null,null);s.default=n.exports}}]);