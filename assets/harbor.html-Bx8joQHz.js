import{_ as a,c as s,a as n,o as r}from"./app-IvRFt9fL.js";const i={};function l(t,e){return r(),s("div",null,e[0]||(e[0]=[n(`<h1 id="harbor" tabindex="-1"><a class="header-anchor" href="#harbor"><span>harbor</span></a></h1><h2 id="api" tabindex="-1"><a class="header-anchor" href="#api"><span>API</span></a></h2><h3 id="授权" tabindex="-1"><a class="header-anchor" href="#授权"><span>授权</span></a></h3><p>Harbor API 2.0 的授权主要通过 <strong>Bearer Token</strong> 或 <strong>Basic 认证</strong> 实现。</p><p>方法一：使用 Bearer Token 认证</p><ol><li><strong>获取 JWT 令牌</strong>发送 POST 请求到 <code>/v2.0/users/login</code>，提供用户名和密码：<div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"></div></div></li></ol><p>curl -X POST -H &quot;Content-Type: application/json&quot; -d &#39;{&quot;principal&quot;:&quot;用户名&quot;, &quot;password&quot;:&quot;密码&quot;}&#39; <a href="https://harbor.example.com/v2.0/users/login" target="_blank" rel="noopener noreferrer">https://harbor.example.com/v2.0/users/login</a></p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">	响应示例：</span>
<span class="line">	\`\`\`json</span>
<span class="line">{ &quot;token&quot;: &quot;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...&quot; }</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol><li><strong>在请求中使用 Token</strong> 将获取的令牌放入 <code>Authorization</code> 头中：<div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"></div></div></li></ol><p>curl -H &quot;Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...&quot; <a href="https://harbor.example.com/api/v2.0/projects" target="_blank" rel="noopener noreferrer">https://harbor.example.com/api/v2.0/projects</a></p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line"></span>
<span class="line">方法二：使用 Basic 认证</span>
<span class="line"></span>
<span class="line">直接在每个请求中提供用户名和密码：</span>
<span class="line"></span>
<span class="line">\`\`\`bash</span>
<span class="line">curl -u 用户名:密码 https://harbor.example.com/api/v2.0/projects</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="其他注意事项" tabindex="-1"><a class="header-anchor" href="#其他注意事项"><span>其他注意事项</span></a></h3><p>• HTTPS 必需：确保使用 HTTPS，否则可能被拒绝。</p><p>• 权限控制：Harbor 基于角色（RBAC）管理权限，需在 UI 中配置用户/项目的权限。</p><p>• API 密钥（Harbor 2.2+）：可在用户设置生成 API 密钥，使用方式：</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line"><span class="token function">curl</span> <span class="token parameter variable">-H</span> <span class="token string">&quot;Authorization: Harbor-API-Key QVBJX0tFWDo6dXNlcm5hbWU6dG9rZW5oYXNo&quot;</span> https://harbor.example.com/api/v2.0/projects</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div>`,16)]))}const p=a(i,[["render",l]]),c=JSON.parse('{"path":"/%E4%BA%91%E5%8E%9F%E7%94%9F/harbor.html","title":"harbor","lang":"zh-CN","frontmatter":{},"headers":[{"level":2,"title":"API","slug":"api","link":"#api","children":[{"level":3,"title":"授权","slug":"授权","link":"#授权","children":[]},{"level":3,"title":"其他注意事项","slug":"其他注意事项","link":"#其他注意事项","children":[]}]}],"git":{},"filePathRelative":"云原生/harbor.md"}');export{p as comp,c as data};
