import{_ as e,c as n,a,o as i}from"./app-BV7amJBm.js";const l={};function d(t,s){return i(),n("div",null,s[0]||(s[0]=[a(`<h1 id="apt-与-deb" tabindex="-1"><a class="header-anchor" href="#apt-与-deb"><span>APT 与 DEB</span></a></h1><h2 id="概述" tabindex="-1"><a class="header-anchor" href="#概述"><span>概述</span></a></h2><p>在 Debian 系 Linux 发行版（如 Ubuntu），<code>APT</code> (Advanced Package Tool) 最常用的高级包管理工具(Ubuntu、Debian 系发行版），他使用 <code>DEB</code> 作为软件包格式。</p><p><code>DEB</code>（Debian Package）是 Debian 系 Linux 发行版（如 Ubuntu）中软件包管理的核心组件。Deb 包通过 Dpkg 工具进行安装。</p><p>它们的关系如下：</p><ul><li><code>Deb</code> 是包格式</li><li><code>Dpkg</code> 用于包的操作安装</li><li><code>Apt</code> 会调用 <code>Dpkg</code> 进行包的安装，并解决依赖问题</li></ul><h2 id="配置" tabindex="-1"><a class="header-anchor" href="#配置"><span>配置</span></a></h2><p>镜像源配置地址：/etc/apt/source.list</p><p>在 Ubuntu24.04，配置格式做了一次升级</p><h3 id="镜像源替换" tabindex="-1"><a class="header-anchor" href="#镜像源替换"><span>镜像源替换</span></a></h3><p>Ubuntu24.04-</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line"><span class="token function">sed</span> <span class="token parameter variable">-i</span> <span class="token string">&#39;s/archive.ubuntu.com/mirrors.aliyun.com/g&#39;</span> /etc/apt/sources.list</span>
<span class="line"><span class="token comment"># 或者</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>Ubuntu24.04+</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">sed -i &quot;s@http://.*archive.ubuntu.com@https://mirrors.aliyun.com@g; s@http://.*security.ubuntu.com@https://mirrors.aliyun.com@g&quot; /etc/apt/sources.list.d/ubuntu.sources</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Debian</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">sed -i &#39;s|http://deb.debian.org|https://mirrors.aliyun.com|g&#39; /etc/apt/sources.list</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>执行替换命令后，要再执行下</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">sudo apt update</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="dpkg-相关命令" tabindex="-1"><a class="header-anchor" href="#dpkg-相关命令"><span>dpkg 相关命令</span></a></h2><h3 id="安装" tabindex="-1"><a class="header-anchor" href="#安装"><span>安装</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line"><span class="token comment"># 安装</span></span>
<span class="line"><span class="token function">sudo</span> dpkg <span class="token parameter variable">-i</span> package.deb</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="卸载" tabindex="-1"><a class="header-anchor" href="#卸载"><span>卸载</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line"><span class="token comment"># 卸载</span></span>
<span class="line"><span class="token function">sudo</span> dpkg <span class="token parameter variable">-r</span> package_name</span>
<span class="line"><span class="token comment"># 完全卸载</span></span>
<span class="line"><span class="token function">sudo</span> dpkg <span class="token parameter variable">-P</span> package_name</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="查询信息" tabindex="-1"><a class="header-anchor" href="#查询信息"><span><strong>查询信息</strong></span></a></h3><ul><li><strong>列出已安装的包</strong><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"></div></div></li></ul><p>dpkg -l</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line"></span>
<span class="line">- **查看包状态（如版本、依赖）**  </span>
<span class="line">	\`\`\`bash</span>
<span class="line">dpkg -s package_name</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><strong>列出包安装的文件</strong><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"></div></div></li></ul><p>dpkg -L package_name</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line"></span>
<span class="line">- **搜索文件所属的包**  </span>
<span class="line">	\`\`\`bash</span>
<span class="line">dpkg -S /path/to/file</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="包内容检查" tabindex="-1"><a class="header-anchor" href="#包内容检查"><span><strong>包内容检查</strong></span></a></h3><ul><li>**查看 <strong><strong>.deb</strong></strong> **文件内容<div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"></div></div></li></ul><p>dpkg -c package.deb</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line"></span>
<span class="line">- **提取包元信息**  </span>
<span class="line">	\`\`\`bash</span>
<span class="line">dpkg -I package.deb</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="注意事项" tabindex="-1"><a class="header-anchor" href="#注意事项"><span>注意事项</span></a></h3><ul><li><code>dpkg</code> 不自动解决依赖，若安装失败可运行 <code>sudo apt-get -f install</code> 修复。</li><li>日常推荐优先使用 <code>apt</code>/<code>apt-get</code>，<code>dpkg</code> 更适合手动管理本地包。</li></ul><h2 id="apt-相关命令" tabindex="-1"><a class="header-anchor" href="#apt-相关命令"><span>apt 相关命令</span></a></h2><h3 id="包查询与搜索" tabindex="-1"><a class="header-anchor" href="#包查询与搜索"><span>包查询与搜索</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line"><span class="token comment"># 搜索包名称</span></span>
<span class="line"><span class="token function">sudo</span> <span class="token function">apt</span> search package_name</span>
<span class="line"></span>
<span class="line"><span class="token comment"># 查看可以升级的包</span></span>
<span class="line"><span class="token function">sudo</span> <span class="token function">apt</span> list <span class="token parameter variable">--upgradeable</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># 查看已经安装的</span></span>
<span class="line"><span class="token function">sudo</span> <span class="token function">apt</span> list <span class="token parameter variable">--installed</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="更新镜像源" tabindex="-1"><a class="header-anchor" href="#更新镜像源"><span>更新镜像源</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line"><span class="token function">sudo</span> <span class="token function">apt</span> update</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="升级已经安装的包" tabindex="-1"><a class="header-anchor" href="#升级已经安装的包"><span>升级已经安装的包</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line"><span class="token function">sudo</span> <span class="token function">apt</span> upgrade</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="查看包信息" tabindex="-1"><a class="header-anchor" href="#查看包信息"><span>查看包信息</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line"><span class="token comment"># 查看包内容</span></span>
<span class="line"><span class="token function">sudo</span> <span class="token function">apt</span> show package_name</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="保持包-禁止其版本更新" tabindex="-1"><a class="header-anchor" href="#保持包-禁止其版本更新"><span>保持包（禁止其版本更新）</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line"><span class="token function">sudo</span> apt-mark hold package_name</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="下载源码包" tabindex="-1"><a class="header-anchor" href="#下载源码包"><span>下载源码包</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line"><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token builtin class-name">source</span> package_name</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="清理维护" tabindex="-1"><a class="header-anchor" href="#清理维护"><span>清理维护</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line"><span class="token comment"># 清理缓存包</span></span>
<span class="line"><span class="token function">sudo</span> <span class="token function">apt</span> clean</span>
<span class="line"><span class="token comment"># 只清理旧版本的缓存包</span></span>
<span class="line"><span class="token function">sudo</span> <span class="token function">apt</span> autoclean</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>例如命令用于在基于 Debian 的 Linux 发行版（如 Ubuntu）上将 kubelet、kubeadm 和 kubectl 这三个 Kubernetes 组件的包标记为“保持”状态。这样做的目的是防止这些包在系统更新时被自动升级。</p>`,52)]))}const c=e(l,[["render",d]]),r=JSON.parse('{"path":"/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/Linux/%E5%8C%85%E7%AE%A1%E7%90%86/APT%E4%B8%8EDEB.html","title":"APT 与 DEB","lang":"zh-CN","frontmatter":{},"headers":[{"level":2,"title":"概述","slug":"概述","link":"#概述","children":[]},{"level":2,"title":"配置","slug":"配置","link":"#配置","children":[{"level":3,"title":"镜像源替换","slug":"镜像源替换","link":"#镜像源替换","children":[]}]},{"level":2,"title":"dpkg 相关命令","slug":"dpkg-相关命令","link":"#dpkg-相关命令","children":[{"level":3,"title":"安装","slug":"安装","link":"#安装","children":[]},{"level":3,"title":"卸载","slug":"卸载","link":"#卸载","children":[]},{"level":3,"title":"查询信息","slug":"查询信息","link":"#查询信息","children":[]},{"level":3,"title":"包内容检查","slug":"包内容检查","link":"#包内容检查","children":[]},{"level":3,"title":"注意事项","slug":"注意事项","link":"#注意事项","children":[]}]},{"level":2,"title":"apt 相关命令","slug":"apt-相关命令","link":"#apt-相关命令","children":[{"level":3,"title":"包查询与搜索","slug":"包查询与搜索","link":"#包查询与搜索","children":[]},{"level":3,"title":"更新镜像源","slug":"更新镜像源","link":"#更新镜像源","children":[]},{"level":3,"title":"升级已经安装的包","slug":"升级已经安装的包","link":"#升级已经安装的包","children":[]},{"level":3,"title":"查看包信息","slug":"查看包信息","link":"#查看包信息","children":[]},{"level":3,"title":"保持包（禁止其版本更新）","slug":"保持包-禁止其版本更新","link":"#保持包-禁止其版本更新","children":[]},{"level":3,"title":"下载源码包","slug":"下载源码包","link":"#下载源码包","children":[]},{"level":3,"title":"清理维护","slug":"清理维护","link":"#清理维护","children":[]}]}],"git":{},"filePathRelative":"操作系统/Linux/包管理/APT与DEB.md"}');export{c as comp,r as data};
