import{_ as d,c as p,a as c,d as s,b as a,w as e,r as v,o as t,e as l}from"./app-bElOgxFi.js";const r={};function u(m,n){const i=v("RouteLink");return t(),p("div",null,[n[5]||(n[5]=c(`<h1 id="github-action" tabindex="-1"><a class="header-anchor" href="#github-action"><span>Github Action</span></a></h1><h2 id="一个基本的流水线示例" tabindex="-1"><a class="header-anchor" href="#一个基本的流水线示例"><span>一个基本的流水线示例</span></a></h2><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">name: 部署</span>
<span class="line"></span>
<span class="line">on:</span>
<span class="line">  workflow_dispatch: {} # 支持手动触发</span>
<span class="line">  push:</span>
<span class="line">    branches:</span>
<span class="line">      - main # main分支上运行</span>
<span class="line">  schedule:</span>
<span class="line">     - cron: &#39;0 */2 * * *&#39;  # 每两小时运行一次，根据需求调整</span>
<span class="line">  repository_dispatch:</span>
<span class="line">      types: [feishu] # 可以通过名为feishu的webhook发起</span>
<span class="line">permissions:</span>
<span class="line">  contents: write</span>
<span class="line"></span>
<span class="line"># 定义具体执行步骤</span>
<span class="line">jobs:</span>
<span class="line">  deploy-gh-pages:</span>
<span class="line">    runs-on: ubuntu-latest</span>
<span class="line">    steps:</span>
<span class="line">      # 检出代码</span>
<span class="line">      - name: Checkout</span>
<span class="line">        uses: actions/checkout@v3</span>
<span class="line">        with:</span>
<span class="line">          fetch-depth: 0</span>
<span class="line"></span>
<span class="line">      # 使用docker步骤</span>
<span class="line">      - name: 构建</span>
<span class="line">        uses: docker://library/python:3.13</span>
<span class="line">        with:</span>
<span class="line">          entrypoint: /bin/sh</span>
<span class="line">          args: -c &quot;python3 build.py &amp;&amp; echo &quot;成果&quot;</span>
<span class="line">      - name: 设置 Node.js</span>
<span class="line">        uses: actions/setup-node@v3</span>
<span class="line">        with:</span>
<span class="line">          node-version: 20</span>
<span class="line">          cache: npm</span>
<span class="line">      </span>
<span class="line">      - name: 安装依赖</span>
<span class="line">        run: npm ci</span>
<span class="line"></span>
<span class="line">      - name: 构建文档</span>
<span class="line">        # 不要使用 Jekyll 处理该目录的内容，从而保留所有文件（例如以 _ 开头的文件）。</span>
<span class="line">        run: |-</span>
<span class="line">          npm run docs:build</span>
<span class="line">          &gt; .vuepress/dist/.nojekyll</span>
<span class="line"></span>
<span class="line">      - name: 部署文档</span>
<span class="line">        uses: JamesIves/github-pages-deploy-action@v4</span>
<span class="line">        with:</span>
<span class="line">          # 这是文档部署到的分支名称</span>
<span class="line">          branch: gh-pages</span>
<span class="line">          folder: .vuepress/dist</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="子文档" tabindex="-1"><a class="header-anchor" href="#子文档"><span>子文档</span></a></h2>`,4)),s("ul",null,[n[1]||(n[1]=s("li",null,"[缓存 ](./缓存 .md)",-1)),s("li",null,[a(i,{to:"/Devops/Github/Github%20Action/%E8%A7%A6%E5%8F%91%E6%96%B9%E5%BC%8F.html"},{default:e(()=>n[0]||(n[0]=[l("触发方式")])),_:1})])]),n[6]||(n[6]=s("h2",{id:"子文档-1",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#子文档-1"},[s("span",null,"子文档")])],-1)),s("ul",null,[n[4]||(n[4]=s("li",null,"[缓存 ](./缓存 .md)",-1)),s("li",null,[a(i,{to:"/Devops/Github/Github%20Action/%E7%BC%93%E5%AD%98Cache.html"},{default:e(()=>n[2]||(n[2]=[l("缓存Cache")])),_:1})]),s("li",null,[a(i,{to:"/Devops/Github/Github%20Action/%E8%A7%A6%E5%8F%91%E6%96%B9%E5%BC%8F.html"},{default:e(()=>n[3]||(n[3]=[l("触发方式")])),_:1})])])])}const b=d(r,[["render",u]]),h=JSON.parse('{"path":"/Devops/Github/Github%20Action/","title":"Github Action","lang":"zh-CN","frontmatter":{},"headers":[{"level":2,"title":"一个基本的流水线示例","slug":"一个基本的流水线示例","link":"#一个基本的流水线示例","children":[]},{"level":2,"title":"子文档","slug":"子文档","link":"#子文档","children":[]},{"level":2,"title":"子文档","slug":"子文档-1","link":"#子文档-1","children":[]}],"git":{},"filePathRelative":"Devops/Github/Github Action/README.md"}');export{b as comp,h as data};
