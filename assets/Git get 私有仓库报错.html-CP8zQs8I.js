import{_ as n,c as a,a as t,o as e}from"./app-EGhza7Qr.js";const p={};function o(l,s){return e(),a("div",null,s[0]||(s[0]=[t(`<h1 id="git-get-私有仓库报错" tabindex="-1"><a class="header-anchor" href="#git-get-私有仓库报错"><span>Git get 私有仓库报错</span></a></h1><p>当安装一个私有库的时候，会报错，比如</p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line">go<span class="token punctuation">:</span> gitlab<span class="token punctuation">.</span>xgjoy<span class="token punctuation">.</span>org<span class="token operator">/</span>demo<span class="token operator">/</span>demo@latest<span class="token punctuation">:</span> module gitlab<span class="token punctuation">.</span>xgjoy<span class="token punctuation">.</span>org<span class="token operator">/</span>demo<span class="token operator">/</span>demo<span class="token punctuation">:</span> git ls<span class="token operator">-</span>remote <span class="token operator">-</span>q origin <span class="token keyword">in</span> <span class="token operator">/</span>home<span class="token operator">/</span>user00<span class="token operator">/</span>go<span class="token operator">/</span>pkg<span class="token operator">/</span>mod<span class="token operator">/</span>cache<span class="token operator">/</span>vcs<span class="token operator">/</span><span class="token punctuation">:</span> exit status <span class="token number">128</span><span class="token punctuation">:</span></span>
<span class="line">        fatal<span class="token punctuation">:</span> could <span class="token keyword">not</span> read Username <span class="token keyword">for</span> <span class="token string">&#39;https://gitlab.xgjoy.org&#39;</span><span class="token punctuation">:</span> terminal prompts disabled</span>
<span class="line">Confirm the <span class="token keyword">import</span> path was entered correctly<span class="token punctuation">.</span></span>
<span class="line">If this <span class="token keyword">is</span> a private repository<span class="token punctuation">,</span> see https<span class="token punctuation">:</span><span class="token operator">//</span>golang<span class="token punctuation">.</span>org<span class="token operator">/</span>doc<span class="token operator">/</span>faq<span class="token comment">#git_https for additional information.</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这是因为，go get 请求仓库是，默认采用 https 的方式，即使本地添加了 gitlab 的 ssh 的免密，还是 https 方式还是无授权的，因此，有以下解决方案：</p><ol><li>将 https 转为 ssh 方式</li></ol><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line">git config <span class="token operator">-</span><span class="token operator">-</span><span class="token keyword">global</span> url<span class="token punctuation">.</span><span class="token string">&quot;ssh://git@gitlab.xgjoy.org&quot;</span><span class="token punctuation">.</span>insteadOf https<span class="token punctuation">:</span><span class="token operator">//</span>gitlab<span class="token punctuation">.</span>xgjoy<span class="token punctuation">.</span>org</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>或在~/.gitconfig 中添加下列数据</p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token punctuation">[</span>url <span class="token string">&quot;ssh://git@gitlab.xgjoy.org&quot;</span><span class="token punctuation">]</span></span>
<span class="line">         insteadOf <span class="token operator">=</span> https<span class="token punctuation">:</span><span class="token operator">//</span>gitlab<span class="token punctuation">.</span>xgjoy<span class="token punctuation">.</span>org</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ol><li>HTTPS 增加授权</li></ol><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line">git config <span class="token operator">-</span><span class="token operator">-</span><span class="token keyword">global</span> url<span class="token punctuation">.</span><span class="token string">&quot;https://gitlab-ci-token:$CI_JOB_TOKEN@gitlab.xgjoy.org&quot;</span><span class="token punctuation">.</span>insteadOf https<span class="token punctuation">:</span><span class="token operator">//</span>gitlab<span class="token punctuation">.</span>xgjoy<span class="token punctuation">.</span>org</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>这个 token 可以从 gitlab 上申请一个只读的 token</p><p>或在~/.gitconfig 中添加下列数据</p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token punctuation">[</span>url <span class="token string">&quot;https://gitlab-ci-token:$CI_JOB_TOKEN@gitlab.xgjoy.org&quot;</span><span class="token punctuation">]</span></span>
<span class="line">         insteadOf <span class="token operator">=</span> https<span class="token punctuation">:</span><span class="token operator">//</span>gitlab<span class="token punctuation">.</span>xgjoy<span class="token punctuation">.</span>org</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div>`,13)]))}const c=n(p,[["render",o]]),r=JSON.parse('{"path":"/%E6%9D%82%E9%A1%B9/%E7%89%88%E6%9C%AC%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7/Git/Git%20get%20%E7%A7%81%E6%9C%89%E4%BB%93%E5%BA%93%E6%8A%A5%E9%94%99.html","title":"Git get 私有仓库报错","lang":"zh-CN","frontmatter":{},"headers":[],"git":{},"filePathRelative":"杂项/版本管理工具/Git/Git get 私有仓库报错.md"}');export{c as comp,r as data};
